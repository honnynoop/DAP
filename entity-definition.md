# DA 개념 데이터 모델링: 엔터티 정의 과정

## 1. 엔터티(Entity)란?

**엔터티**란 업무에서 관리가 필요한 대상으로, 두 개 이상의 인스턴스(Instance)가 존재하고 각 인스턴스를 구분할 수 있는 속성(Attribute)을 가지는 개념적 집합이다.

### 엔터티 성립 조건 (4가지)

| 조건 | 설명 | 위반 시 문제 |
|---|---|---|
| **업무 관련성** | 업무에서 실제로 관리되는 대상이어야 함 | 불필요한 엔터티 생성 → 모델 복잡도 증가 |
| **식별 가능성** | 각 인스턴스를 유일하게 구별할 수 있어야 함 | 식별자 부재 → 데이터 중복/무결성 오류 |
| **2개 이상의 인스턴스** | 단 하나의 값만 존재하면 엔터티가 아님 | 불필요한 테이블 생성 |
| **2개 이상의 속성** | 식별자만 있고 다른 속성이 없으면 부적절 | 관계 테이블로 대체 검토 필요 |

---

## 2. 엔터티 유형 분류

### 2.1 발생 시점에 따른 분류

| 유형 | 정의 | 예시 |
|---|---|---|
| **기본 엔터티 (Fundamental)** | 독립적으로 존재하며 다른 엔터티에 의존하지 않음 | 고객, 상품, 직원 |
| **중심 엔터티 (Main)** | 기본 엔터티로부터 발생하며 업무의 중심 역할 수행 | 주문, 계약, 청구 |
| **행위 엔터티 (Active)** | 두 개 이상의 엔터티 간 행위 또는 이벤트로 발생 | 주문상세, 이체내역, 변경이력 |

### 2.2 유·무형에 따른 분류

| 유형 | 정의 | 예시 |
|---|---|---|
| **유형 엔터티 (Tangible)** | 물리적으로 존재하는 실체 | 직원, 창고, 설비 |
| **개념 엔터티 (Conceptual)** | 물리적으로 존재하지 않는 개념 | 부서, 조직, 등급 |
| **사건 엔터티 (Event)** | 업무 수행 중 발생하는 사건 | 주문, 결제, 로그인이력 |

---

## 3. 엔터티 정의 과정 (단계별 상세)

### Step 1. 업무 분석 자료 검토

엔터티 도출의 원천이 되는 업무 관련 자료를 수집하고 분석한다.

- 업무 기술서, 요구사항 정의서, 현행 화면 및 장표 검토
- 인터뷰·워크숍을 통한 업무 담당자 의견 수렴
- 현행 데이터베이스 테이블 및 파일 구조 분석
- 주제영역 정의서와 BFD(업무기능분해도) 참조
- **목적**: 엔터티 후보군을 최대한 넓게 수집

### Step 2. 엔터티 후보 도출

수집된 자료에서 명사형 업무 개념들을 추출하여 엔터티 후보로 선정한다.

- 업무 기술서에서 **명사형 단어** 추출 (예: 고객, 주문, 상품)
- 업무 담당자가 실제로 "관리한다"고 표현하는 대상 식별
- 현행 시스템의 핵심 테이블·코드·마스터 데이터 참조
- 중복 후보 1차 통합, 유사 개념 그룹핑

**후보 도출 기법:**

| 기법 | 설명 |
|---|---|
| **명사 추출법** | 업무 기술서·인터뷰록에서 명사 목록 추출 |
| **화면/장표 분석** | 실제 사용 화면의 입력·출력 항목 분석 |
| **현행 DB 역공학** | 기존 테이블 구조에서 엔터티 개념 도출 |
| **업무 흐름 추적** | 프로세스 흐름에서 생성·사용·수정되는 데이터 식별 |

### Step 3. 엔터티 후보 검증

도출된 후보가 실제 엔터티로서 성립하는지 4가지 조건으로 검증한다.

**검증 체크리스트:**

| 검증 항목 | 확인 질문 | 판정 |
|---|---|---|
| 업무 관련성 | 이 대상을 업무에서 실제로 관리하는가? | Yes → 유지 / No → 제거 |
| 식별 가능성 | 각 인스턴스를 구별할 수 있는 식별자가 있는가? | Yes → 유지 / No → 재검토 |
| 복수 인스턴스 | 인스턴스가 2개 이상 존재하는가? | Yes → 유지 / No → 속성으로 전환 검토 |
| 복수 속성 | 식별자 외에 관리할 속성이 있는가? | Yes → 유지 / No → 관계로 대체 검토 |

**자주 발생하는 오류 유형:**

| 오류 유형 | 설명 | 해결 방법 |
|---|---|---|
| **속성의 엔터티화** | 속성으로 표현할 것을 엔터티로 만든 경우 | 속성으로 이동 |
| **관계의 엔터티화** | 두 엔터티의 관계를 별도 엔터티로 만든 경우 | 관계로 표현 또는 행위 엔터티로 조정 |
| **동음이의어 혼용** | 같은 이름이지만 다른 의미로 혼용된 경우 | 별도 엔터티로 분리 |
| **유사 엔터티 중복** | 다른 이름이지만 같은 개념인 경우 | 통합 후 동의어 관리 |

### Step 4. 엔터티 명칭 정의

검증된 엔터티에 표준화된 명칭을 부여한다.

**명칭 부여 원칙:**

| 원칙 | 내용 | 예시 |
|---|---|---|
| **단수형 사용** | 복수형이 아닌 단수 명사로 표현 | 고객 (O) / 고객들 (X) |
| **업무 용어 사용** | 현업에서 실제 사용하는 용어 채택 | 거래처 (O) / 벤더마스터 (X) |
| **약어 금지** | 의미 전달이 명확한 단어 사용 | 제품 (O) / 제품M (X) |
| **유일성 보장** | 동일 모델 내 중복 명칭 불허 | 전체 엔터티명 중복 검토 |
| **한글/영문 병행** | 국문명과 영문명 동시 정의 | 고객 / Customer |

### Step 5. 엔터티 정의서 작성

엔터티의 업무적 정의, 특성, 관계를 문서화한다.

**정의서 필수 구성 항목:**

| 항목 | 설명 |
|---|---|
| 엔터티 코드 | 전사 고유 식별 코드 (예: ENT-001) |
| 엔터티명 (국문/영문) | 표준화된 명칭 |
| 주제영역 | 소속 주제영역 |
| 엔터티 유형 | 기본/중심/행위 엔터티 구분 |
| 정의 | 업무적 의미와 범위를 1~3문장으로 기술 |
| 인스턴스 예시 | 실제 데이터 예시 2~3건 |
| 식별자(후보키) | 인스턴스를 구별하는 속성 또는 속성 조합 |
| 핵심 속성 | 주요 관리 항목 목록 |
| 관련 엔터티 | 관계가 있는 주요 엔터티 |
| 데이터 오너 | 관리 책임 부서/담당자 |
| 작성자/작성일 | 이력 관리 |

### Step 6. 엔터티 간 관계 정의 (초안)

도출된 엔터티들 간의 연관성을 파악하여 관계를 초안 수준에서 정의한다.

- 엔터티 간 업무적 연관 관계 식별 (예: 고객이 주문을 한다)
- 관계 명칭, 카디널리티(1:1, 1:N, M:N), 선택성(필수/선택) 초안 정의
- ERD(Entity-Relationship Diagram) 초안 작성
- 불명확한 관계는 이해관계자 확인 후 보완

### Step 7. 이해관계자 검토 및 확정

작성된 엔터티 정의를 업무 담당자, IT 부서, 거버넌스 위원회와 공유하여 최종 확정한다.

- 엔터티 정의서 공유 및 리뷰 회의 진행
- 현업 관점의 누락·오류 사항 보완
- 엔터티 간 경계 및 중복 최종 조정
- 확정된 엔터티 목록 승인 및 배포
- 논리 모델링 단계로 이행 입력물 확정

---

## 4. 엔터티 정의 전체 과정 요약표

| 단계 | 과정명 | 주요 활동 | 추출 대상 / 산출물 |
|:---:|---|---|---|
| Step 1 | 업무 분석 자료 검토 | 업무기술서·요구사항·현행DB 수집, 인터뷰·워크숍 진행 | 업무 관련 자료 목록, 인터뷰록, 현행 테이블 목록 |
| Step 2 | 엔터티 후보 도출 | 명사 추출, 화면/장표 분석, DB 역공학, 업무 흐름 추적 | 엔터티 후보 목록 (롱리스트) |
| Step 3 | 엔터티 후보 검증 | 4대 조건 검증 (업무관련성·식별가능성·복수인스턴스·복수속성), 오류 유형 제거 | 검증된 엔터티 목록 (숏리스트) |
| Step 4 | 엔터티 명칭 정의 | 표준 명칭 부여, 중복 검토, 국문·영문명 확정 | 엔터티 명칭 표준 목록 |
| Step 5 | 엔터티 정의서 작성 | 코드·정의·유형·인스턴스 예시·식별자·핵심속성·오너 문서화 | 엔터티 정의서 |
| Step 6 | 엔터티 간 관계 정의 | 관계 식별, 카디널리티·선택성 초안, ERD 초안 작성 | 개념 ERD 초안, 관계 정의 목록 |
| Step 7 | 이해관계자 검토 및 확정 | 리뷰 회의, 누락·오류 보완, 최종 승인 | 확정 엔터티 목록, 승인 문서, 논리 모델링 입력물 |

---

## 5. 엔터티 정의서 예시

| 항목 | 내용 |
|---|---|
| **엔터티 코드** | ENT-003 |
| **엔터티명 (국문)** | 주문 |
| **엔터티명 (영문)** | Order |
| **주제영역** | 거래/계약 |
| **엔터티 유형** | 중심 엔터티 |
| **정의** | 고객이 하나 이상의 상품을 구매하기 위해 요청한 거래 단위로, 주문 접수 시점부터 완료·취소 시점까지 관리되는 데이터 집합 |
| **인스턴스 예시** | ORD-20240101-0001 (홍길동, 노트북 1대), ORD-20240102-0002 (김철수, 마우스 2개) |
| **식별자 (후보키)** | 주문번호 |
| **핵심 속성** | 주문번호, 주문일시, 주문상태, 총주문금액, 배송지주소 |
| **관련 엔터티** | 고객(고객이 주문을 한다), 주문상세(주문은 주문상세를 포함한다), 상품 |
| **데이터 오너** | 영업팀 |
| **작성자 / 작성일** | 홍길동 DA / 2024-03-01 |

---

## 6. 핵심 유의사항

- **속성과 엔터티 구분 철저**: 단순히 값을 갖는 것은 속성, 여러 속성으로 관리되는 개념은 엔터티
- **업무 용어 우선**: 기술 용어(테이블명, 컬럼명)가 아닌 현업 용어로 정의
- **정의의 명확성**: 엔터티 정의는 업무 담당자가 읽고 이해할 수 있는 수준으로 작성
- **인스턴스 예시 필수**: 추상적 정의를 구체화하여 이해관계자 간 오해 방지
- **이력 관리**: 엔터티 정의서는 변경 시 이력을 남겨 데이터 거버넌스 연계
- **논리 모델링과의 연계**: 개념 단계의 엔터티는 논리 단계에서 테이블로 전환되므로 경계와 정의를 명확히 유지
